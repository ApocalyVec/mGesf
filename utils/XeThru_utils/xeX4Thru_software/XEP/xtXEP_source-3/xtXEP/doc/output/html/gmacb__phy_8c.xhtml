<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>XeThru Embedded Platform - XEP: src/hal/x4m0x_s70/libraries/libboard/source/gmacb_phy.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <!-- Platform title -->
    <div class="page-title-bar container-fluid">
      <div id="projectalign" class="row">
        <div id="projectname" class="col-sm-12">XeThru Embedded Platform - XEP
          &#160;<span id="projectnumber">3.4.7</span>
        </div>
        <div id="projectbrief" class="col-sm-12">Embedded platform for XeThru firmware products</div>
      </div>
    </div>
    <div class="topbar">
      <div class="container">
        <div id="titlearea">
          <div class="xethru-logo">
            <img src="xethru-logo_220x55HD.png" alt="Novelda XeThru web site" id="logo-image" />
          </div>
        </div>
        <!-- end header part -->
        <!-- Generated by Doxygen 1.8.12 -->
        <!--BEGIN MAIN-NAV AND SEARCHENGINE-->
        <div id="main-nav"></div>
        <!--END MAIN-NAV AND SEARCHENGINE-->
      </div>
    </div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.xhtml">src</a></li><li class="navelem"><a class="el" href="dir_4ce6a7f885e2866a554ba9e7335035f1.xhtml">hal</a></li><li class="navelem"><a class="el" href="dir_9dc4d255e566c48428ae1788dff8c9e9.xhtml">x4m0x_s70</a></li><li class="navelem"><a class="el" href="dir_75c70effab526b28e035b6c6a3220eb7.xhtml">libraries</a></li><li class="navelem"><a class="el" href="dir_0bcb53a0bcfa39e1247d0c604a39aec5.xhtml">libboard</a></li><li class="navelem"><a class="el" href="dir_6a4cf6ccb3ad1b6ad5772753703ee78d.xhtml">source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">gmacb_phy.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="board_8h_source.xhtml">board.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for gmacb_phy.c:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gmacb__phy_8c__incl.svg" width="222" height="127"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a936794cc24c6750260a8f07a320de905"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gmacb__phy_8c.xhtml#a936794cc24c6750260a8f07a320de905">GMACB_RETRY_MAX</a>&#160;&#160;&#160;300000</td></tr>
<tr class="memdesc:a936794cc24c6750260a8f07a320de905"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default max retry count.  <a href="#a936794cc24c6750260a8f07a320de905">More...</a><br /></td></tr>
<tr class="separator:a936794cc24c6750260a8f07a320de905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4d1aa5a6b66a10d039046a93b5e6543"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gmacb__phy_8c.xhtml#aa4d1aa5a6b66a10d039046a93b5e6543">GACB_RETRY_MAX</a>&#160;&#160;&#160;1000000</td></tr>
<tr class="memdesc:aa4d1aa5a6b66a10d039046a93b5e6543"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default max retry count.  <a href="#aa4d1aa5a6b66a10d039046a93b5e6543">More...</a><br /></td></tr>
<tr class="separator:aa4d1aa5a6b66a10d039046a93b5e6543"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:add3908b951252bdb91a944c1895ed794"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gmacb__phy_8c.xhtml#add3908b951252bdb91a944c1895ed794">GMACB_WaitPhy</a> (<a class="el" href="struct_gmac.xhtml">Gmac</a> *pHw, uint32_t retry)</td></tr>
<tr class="memdesc:add3908b951252bdb91a944c1895ed794"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait PHY operation complete.  <a href="#add3908b951252bdb91a944c1895ed794">More...</a><br /></td></tr>
<tr class="separator:add3908b951252bdb91a944c1895ed794"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add851348aa8e6c519d4efda3e53d025d"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gmacb__phy_8c.xhtml#add851348aa8e6c519d4efda3e53d025d">GMACB_ReadPhy</a> (<a class="el" href="struct_gmac.xhtml">Gmac</a> *pHw, uint8_t PhyAddress, uint8_t Address, uint32_t *pValue, uint32_t retry)</td></tr>
<tr class="memdesc:add851348aa8e6c519d4efda3e53d025d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read PHY register.  <a href="#add851348aa8e6c519d4efda3e53d025d">More...</a><br /></td></tr>
<tr class="separator:add851348aa8e6c519d4efda3e53d025d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba0c6004ff96312d6cd98d4948ec0014"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gmacb__phy_8c.xhtml#aba0c6004ff96312d6cd98d4948ec0014">GMACB_WritePhy</a> (<a class="el" href="struct_gmac.xhtml">Gmac</a> *pHw, uint8_t PhyAddress, uint8_t Address, uint32_t Value, uint32_t retry)</td></tr>
<tr class="memdesc:aba0c6004ff96312d6cd98d4948ec0014"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write PHY register Return 1 if successfully, 0 if timeout.  <a href="#aba0c6004ff96312d6cd98d4948ec0014">More...</a><br /></td></tr>
<tr class="separator:aba0c6004ff96312d6cd98d4948ec0014"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae51ab44e9f86bac91bc556a27ce6ffd0"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gmacb__phy_8c.xhtml#ae51ab44e9f86bac91bc556a27ce6ffd0">GMACB_FindValidPhy</a> (<a class="el" href="gmacb__phy_8h.xhtml#afef15abb77bd4027bf2fa83007ae968d">GMacb</a> *pMacb)</td></tr>
<tr class="memdesc:ae51ab44e9f86bac91bc556a27ce6ffd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a valid PHY Address (from 0 to 31).  <a href="#ae51ab44e9f86bac91bc556a27ce6ffd0">More...</a><br /></td></tr>
<tr class="separator:ae51ab44e9f86bac91bc556a27ce6ffd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aced88b292369024663d7391ee02d2539"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gmacb__phy_8c.xhtml#aced88b292369024663d7391ee02d2539">GMACB_DumpRegisters</a> (<a class="el" href="gmacb__phy_8h.xhtml#afef15abb77bd4027bf2fa83007ae968d">GMacb</a> *pMacb)</td></tr>
<tr class="memdesc:aced88b292369024663d7391ee02d2539"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump all the useful registers.  <a href="#aced88b292369024663d7391ee02d2539">More...</a><br /></td></tr>
<tr class="separator:aced88b292369024663d7391ee02d2539"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cd90d5d9a845b1c93d51d30e1092cc6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gmacb__phy_8c.xhtml#a7cd90d5d9a845b1c93d51d30e1092cc6">GMACB_SetupTimeout</a> (<a class="el" href="gmacb__phy_8h.xhtml#afef15abb77bd4027bf2fa83007ae968d">GMacb</a> *pMacb, uint32_t toMax)</td></tr>
<tr class="memdesc:a7cd90d5d9a845b1c93d51d30e1092cc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup the maximum timeout count of the driver.  <a href="#a7cd90d5d9a845b1c93d51d30e1092cc6">More...</a><br /></td></tr>
<tr class="separator:a7cd90d5d9a845b1c93d51d30e1092cc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e35f350f55ff843f4c44c38e063d469"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gmacb__phy_8c.xhtml#a6e35f350f55ff843f4c44c38e063d469">GMACB_Init</a> (<a class="el" href="gmacb__phy_8h.xhtml#afef15abb77bd4027bf2fa83007ae968d">GMacb</a> *pMacb, <a class="el" href="group__gmacd__types.xhtml#gaa8760917079000a5ee7fbc7fab992dd3">sGmacd</a> *pGmacd, uint8_t phyAddress)</td></tr>
<tr class="memdesc:a6e35f350f55ff843f4c44c38e063d469"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the MACB instance.  <a href="#a6e35f350f55ff843f4c44c38e063d469">More...</a><br /></td></tr>
<tr class="separator:a6e35f350f55ff843f4c44c38e063d469"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ba3ad1335880787330bf3c859c5b32e"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gmacb__phy_8c.xhtml#a9ba3ad1335880787330bf3c859c5b32e">GMACB_ResetPhy</a> (<a class="el" href="gmacb__phy_8h.xhtml#afef15abb77bd4027bf2fa83007ae968d">GMacb</a> *pMacb)</td></tr>
<tr class="memdesc:a9ba3ad1335880787330bf3c859c5b32e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Issue a SW reset to reset all registers of the PHY.  <a href="#a9ba3ad1335880787330bf3c859c5b32e">More...</a><br /></td></tr>
<tr class="separator:a9ba3ad1335880787330bf3c859c5b32e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aa4129425bc32dcd2ec8ee4643980cf"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gmacb__phy_8c.xhtml#a9aa4129425bc32dcd2ec8ee4643980cf">GMACB_InitPhy</a> (<a class="el" href="gmacb__phy_8h.xhtml#afef15abb77bd4027bf2fa83007ae968d">GMacb</a> *pMacb, uint32_t mck, const <a class="el" href="pio_8h.xhtml#a5435e02d3c6181a41089b9abc6ce4aee">Pin</a> *pResetPins, uint32_t nbResetPins, const <a class="el" href="pio_8h.xhtml#a5435e02d3c6181a41089b9abc6ce4aee">Pin</a> *pGmacPins, uint32_t nbGmacPins)</td></tr>
<tr class="memdesc:a9aa4129425bc32dcd2ec8ee4643980cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a HW initialize to the PHY (via RSTC) and set up clocks &amp; PIOs This should be called only once to initialize the PHY pre-settings.  <a href="#a9aa4129425bc32dcd2ec8ee4643980cf">More...</a><br /></td></tr>
<tr class="separator:a9aa4129425bc32dcd2ec8ee4643980cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2c6c693eb5de616072181df0ae32374"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gmacb__phy_8c.xhtml#aa2c6c693eb5de616072181df0ae32374">GMACB_AutoNegotiate</a> (<a class="el" href="gmacb__phy_8h.xhtml#afef15abb77bd4027bf2fa83007ae968d">GMacb</a> *pMacb)</td></tr>
<tr class="memdesc:aa2c6c693eb5de616072181df0ae32374"><td class="mdescLeft">&#160;</td><td class="mdescRight">Issue a Auto Negotiation of the PHY.  <a href="#aa2c6c693eb5de616072181df0ae32374">More...</a><br /></td></tr>
<tr class="separator:aa2c6c693eb5de616072181df0ae32374"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa4d1aa5a6b66a10d039046a93b5e6543"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4d1aa5a6b66a10d039046a93b5e6543">&sect;&nbsp;</a></span>GACB_RETRY_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GACB_RETRY_MAX&#160;&#160;&#160;1000000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default max retry count. </p>

</div>
</div>
<a id="a936794cc24c6750260a8f07a320de905"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a936794cc24c6750260a8f07a320de905">&sect;&nbsp;</a></span>GMACB_RETRY_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GMACB_RETRY_MAX&#160;&#160;&#160;300000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default max retry count. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa2c6c693eb5de616072181df0ae32374"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2c6c693eb5de616072181df0ae32374">&sect;&nbsp;</a></span>GMACB_AutoNegotiate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t GMACB_AutoNegotiate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="gmacb__phy_8h.xhtml#afef15abb77bd4027bf2fa83007ae968d">GMacb</a> *&#160;</td>
          <td class="paramname"><em>pMacb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Issue a Auto Negotiation of the PHY. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pMacb</td><td>Pointer to the MACB instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if successfully, 0 if timeout. </dd></dl>
<p>Set the Auto_negotiation Advertisement Register, MII advertising for Next page 100BaseTxFD and HD, 10BaseTFD and HD, IEEE 802.3 </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gmacb__phy_8c_aa2c6c693eb5de616072181df0ae32374_cgraph.svg" width="598" height="278"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aced88b292369024663d7391ee02d2539"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aced88b292369024663d7391ee02d2539">&sect;&nbsp;</a></span>GMACB_DumpRegisters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GMACB_DumpRegisters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="gmacb__phy_8h.xhtml#afef15abb77bd4027bf2fa83007ae968d">GMacb</a> *&#160;</td>
          <td class="paramname"><em>pMacb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dump all the useful registers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pMacb</td><td>Pointer to the MACB instance </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gmacb__phy_8c_aced88b292369024663d7391ee02d2539_cgraph.svg" width="379" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gmacb__phy_8c_aced88b292369024663d7391ee02d2539_icgraph.svg" width="404" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ae51ab44e9f86bac91bc556a27ce6ffd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae51ab44e9f86bac91bc556a27ce6ffd0">&sect;&nbsp;</a></span>GMACB_FindValidPhy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t GMACB_FindValidPhy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="gmacb__phy_8h.xhtml#afef15abb77bd4027bf2fa83007ae968d">GMacb</a> *&#160;</td>
          <td class="paramname"><em>pMacb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find a valid PHY Address (from 0 to 31). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pMacb</td><td>Pointer to the MACB instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0xFF when no valid PHY Address found. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gmacb__phy_8c_ae51ab44e9f86bac91bc556a27ce6ffd0_cgraph.svg" width="359" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gmacb__phy_8c_ae51ab44e9f86bac91bc556a27ce6ffd0_icgraph.svg" width="332" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a6e35f350f55ff843f4c44c38e063d469"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e35f350f55ff843f4c44c38e063d469">&sect;&nbsp;</a></span>GMACB_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GMACB_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="gmacb__phy_8h.xhtml#afef15abb77bd4027bf2fa83007ae968d">GMacb</a> *&#160;</td>
          <td class="paramname"><em>pMacb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__gmacd__types.xhtml#gaa8760917079000a5ee7fbc7fab992dd3">sGmacd</a> *&#160;</td>
          <td class="paramname"><em>pGmacd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>phyAddress</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the MACB instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pMacb</td><td>Pointer to the MACB instance </td></tr>
    <tr><td class="paramname">phyAddress</td><td>The PHY address used to access the PHY </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9aa4129425bc32dcd2ec8ee4643980cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9aa4129425bc32dcd2ec8ee4643980cf">&sect;&nbsp;</a></span>GMACB_InitPhy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t GMACB_InitPhy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="gmacb__phy_8h.xhtml#afef15abb77bd4027bf2fa83007ae968d">GMacb</a> *&#160;</td>
          <td class="paramname"><em>pMacb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>mck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="pio_8h.xhtml#a5435e02d3c6181a41089b9abc6ce4aee">Pin</a> *&#160;</td>
          <td class="paramname"><em>pResetPins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>nbResetPins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="pio_8h.xhtml#a5435e02d3c6181a41089b9abc6ce4aee">Pin</a> *&#160;</td>
          <td class="paramname"><em>pGmacPins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>nbGmacPins</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a HW initialize to the PHY (via RSTC) and set up clocks &amp; PIOs This should be called only once to initialize the PHY pre-settings. </p>
<p>The PHY address is reset status of CRS,RXD[3:0] (the emacPins' pullups). The COL pin is used to select MII mode on reset (pulled up for Reduced MII) The RXDV pin is used to select test mode on reset (pulled up for test mode) The above pins should be predefined for corresponding settings in resetPins The GMAC peripheral pins are configured after the reset done. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pMacb</td><td>Pointer to the MACB instance </td></tr>
    <tr><td class="paramname">mck</td><td>Main clock setting to initialize clock </td></tr>
    <tr><td class="paramname">resetPins</td><td>Pointer to list of PIOs to configure before HW RESET (for PHY power on reset configuration latch) </td></tr>
    <tr><td class="paramname">nbResetPins</td><td>Number of PIO items that should be configured </td></tr>
    <tr><td class="paramname">emacPins</td><td>Pointer to list of PIOs for the EMAC interface </td></tr>
    <tr><td class="paramname">nbEmacPins</td><td>Number of PIO items that should be configured </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if RESET OK, 0 if timeout. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gmacb__phy_8c_a9aa4129425bc32dcd2ec8ee4643980cf_cgraph.svg" width="332" height="342"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="add851348aa8e6c519d4efda3e53d025d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add851348aa8e6c519d4efda3e53d025d">&sect;&nbsp;</a></span>GMACB_ReadPhy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t GMACB_ReadPhy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_gmac.xhtml">Gmac</a> *&#160;</td>
          <td class="paramname"><em>pHw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>PhyAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>Address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>pValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>retry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read PHY register. </p>
<p>Return 1 if successfully, 0 if timeout. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHw</td><td>HW controller address </td></tr>
    <tr><td class="paramname">PhyAddress</td><td>PHY Address </td></tr>
    <tr><td class="paramname">Address</td><td>Register Address </td></tr>
    <tr><td class="paramname">pValue</td><td>Pointer to a 32 bit location to store read data </td></tr>
    <tr><td class="paramname">retry</td><td>The retry times, 0 to wait forever until complete. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gmacb__phy_8c_add851348aa8e6c519d4efda3e53d025d_cgraph.svg" width="336" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gmacb__phy_8c_add851348aa8e6c519d4efda3e53d025d_icgraph.svg" width="583" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a9ba3ad1335880787330bf3c859c5b32e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ba3ad1335880787330bf3c859c5b32e">&sect;&nbsp;</a></span>GMACB_ResetPhy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t GMACB_ResetPhy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="gmacb__phy_8h.xhtml#afef15abb77bd4027bf2fa83007ae968d">GMacb</a> *&#160;</td>
          <td class="paramname"><em>pMacb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Issue a SW reset to reset all registers of the PHY. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pMacb</td><td>Pointer to the MACB instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if successfully, 0 if timeout. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gmacb__phy_8c_a9ba3ad1335880787330bf3c859c5b32e_cgraph.svg" width="339" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gmacb__phy_8c_a9ba3ad1335880787330bf3c859c5b32e_icgraph.svg" width="312" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a7cd90d5d9a845b1c93d51d30e1092cc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cd90d5d9a845b1c93d51d30e1092cc6">&sect;&nbsp;</a></span>GMACB_SetupTimeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GMACB_SetupTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="gmacb__phy_8h.xhtml#afef15abb77bd4027bf2fa83007ae968d">GMacb</a> *&#160;</td>
          <td class="paramname"><em>pMacb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>toMax</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup the maximum timeout count of the driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pMacb</td><td>Pointer to the MACB instance </td></tr>
    <tr><td class="paramname">toMax</td><td>Timeout maximum count. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="add3908b951252bdb91a944c1895ed794"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add3908b951252bdb91a944c1895ed794">&sect;&nbsp;</a></span>GMACB_WaitPhy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t GMACB_WaitPhy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_gmac.xhtml">Gmac</a> *&#160;</td>
          <td class="paramname"><em>pHw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>retry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait PHY operation complete. </p>
<p>Return 1 if the operation completed successfully. May be need to re-implemented to reduce CPU load. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">retry</td><td>the retry times, 0 to wait forever until complete. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gmacb__phy_8c_add3908b951252bdb91a944c1895ed794_cgraph.svg" width="286" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gmacb__phy_8c_add3908b951252bdb91a944c1895ed794_icgraph.svg" width="316" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aba0c6004ff96312d6cd98d4948ec0014"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba0c6004ff96312d6cd98d4948ec0014">&sect;&nbsp;</a></span>GMACB_WritePhy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t GMACB_WritePhy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_gmac.xhtml">Gmac</a> *&#160;</td>
          <td class="paramname"><em>pHw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>PhyAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>Address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>retry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write PHY register Return 1 if successfully, 0 if timeout. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHw</td><td>HW controller address </td></tr>
    <tr><td class="paramname">PhyAddress</td><td>PHY Address </td></tr>
    <tr><td class="paramname">Address</td><td>Register Address </td></tr>
    <tr><td class="paramname">Value</td><td>Data to write (Actually 16 bit data) </td></tr>
    <tr><td class="paramname">retry</td><td>The retry times, 0 to wait forever until complete. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gmacb__phy_8c_aba0c6004ff96312d6cd98d4948ec0014_cgraph.svg" width="336" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="gmacb__phy_8c_aba0c6004ff96312d6cd98d4948ec0014_icgraph.svg" width="360" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.12-->
<!-- start footer part -->
<hr class="footer"/>
 <address class="footer">
 Copyright &copy; 2016 Novelda AS - <a href="http://www.xethru.com">www.xehtru.com</a><br />
 <small>
  Generated by &#160;<a href="http://www.doxygen.org/index.html">
  <img class="footer" src="doxygen.png" alt="doxygen"/>
  </a> 1.8.12
 </small>
 </address>
</body>
</html>
